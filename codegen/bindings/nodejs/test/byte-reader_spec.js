import { describe, it } from 'mocha'
import { expect } from 'chai'
import { disassemble, ByteReader } from '../index.js'

const MIDI = [
  0x4d, 0x54, 0x68, 0x64, 0x00, 0x00, 0x00, 0x06,
  0x00, 0x00, 0x00, 0x01, 0x01, 0xe0, 0x4d, 0x54,
  0x72, 0x6b, 0x00, 0x00, 0x00, 0x10, 0x00, 0xff,
  0x03, 0x08, 0x46, 0x6f, 0x72, 0x6d, 0x61, 0x74,
  0x20, 0x30, 0x00, 0xff, 0x2f, 0x00,
]

describe('ByteReader', function () {
  describe('#peek', function () {
    it('should return the first 4 bytes of the byte array without updating the reader position"', function () {
      const reader = new ByteReader(MIDI)

      expect(reader.peek(4)).to.deep.equal([0x4d, 0x54, 0x68, 0x64])
      expect(reader.peek(4)).to.deep.equal([0x4d, 0x54, 0x68, 0x64])
    })
  })
})
